{% extends "pyduck/base.html.jinja" %}

{% block main %}
{% set c = sidebar_community | selectattr("code", "eq", "help") | list | first %}
<div class="container">
    <div class="bg-primary-subtle rounded-2 mt-3 p-3">
        <div class="fs-4 fw-bold">
            {{ c.emoji }}
            <span class="text-primary-emphasis">{{ c.name }}</span>
        </div>
        <div class="pt-2">
            {{ c.description }}
        </div>
    </div>
    <div class="mt-3">
        <div class="text-end">
            {% if current_user.is_authenticated %}
            <a class="btn btn-primary rounded-0" href="{{ url_for('pyduck.community.question_new') }}">질문하기</a>
            {% else %}
            <a class="btn btn-primary rounded-0" hx-get="{{ url_for('pyduck.community.question_new') }}"
               hx-swap="none">질문하기</a>
            {% endif %}
        </div>
    </div>
</div>
<div class="container">
    <div class="p-3 bg-body-tertiary rounded-2 mt-3">
        {% for question in qp %}
        {% include "community/question/question_list_item.html.jinja" %}
        <!-- [start] infinite scroll -->
        {% if loop.last and qp.has_next %}
        <div
             hx-get="{{ url_for('pyduck.community.questions', page=qp.next_num) }}"
             hx-trigger="revealed"
             hx-swapp="afterend">
        </div>
        {% endif %}
        <!-- infinite scroll [end] -->
        {% endfor %}
    </div>
</div>
{% endblock %}
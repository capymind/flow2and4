{% from "pyduck/data/sidebar.html.jinja" import sidebar_community %}
{% set c = sidebar_community | selectattr("code", "eq", "help") | list | first %}
{% for question in qp %}
<div class="row py-3 border-bottom">
    <div class="col d-flex justify-content-between">
        <div class="d-flex align-items-center">
            <div class="bg-body-secondary rounded-1 d-flex justify-content-center align-items-center"
                 style="width: 48px; height: 48px;">
                <span class="fs-5">{{ c.emoji }}</span>
            </div>
            <div class="ps-1 ps-lg-3">
                <div class="fw-bold fs-5">
                    <a class="link link-body-emphasis"
                       href="{{ url_for('pyduck.community.question', question_id=question.id) }}">
                        {{ question.title }}
                    </a>
                </div>
                <div>
                    <small>
                        {{ question.user.nickname }}님이
                        <pd-relative-time datetime="{{ question.created_at }}"></pd-relative-time>
                        {{ c.name }} 관련 작성
                    </small>
                </div>
            </div>
        </div>
        <div class="d-flex align-items-center gap-2">
            <div class="pe-3">
                <img src="{{ question.user.avatar.url }}" width="30px" height="30px" class="rounded-circle">
            </div>
            <div class="d-flex align-items-center">
                <i class="bi bi-arrow-up"></i>
                <span class="ps-1 pe-2">{{ question.vote_count }}</span>
            </div>
            <div class="d-flex align-items-center">
                <i class="bi bi-chat"></i>
                <span class="ps-1 pe-2">{{ question.comment_count }}</span>
            </div>
        </div>
    </div>
</div>
{# [start] infinite scroll trigger#}
{% if loop.last and qp.has_next %}
<div
     hx-get="{{ url_for('pyduck.community.questions', page=qp.next_num) }}"
     hx-trigger="revealed"
     hx-swap="afterend">
</div>
{% endif %}
{# infinite scroll trigger [end] #}
{% endfor %}